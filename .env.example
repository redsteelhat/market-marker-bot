##############################################
# APP / ORTAM AYARLARI
##############################################
APP_NAME=market_maker_bot
APP_ENV=dev             # dev | staging | prod
APP_TIMEZONE=Europe/Istanbul

# TRADING_MODE:
#   live      -> Gerçek emir gönderir (mainnet)
#   paper     -> Testnet + gerçek emir (testnet fonları)
#   dry-run   -> Hiç emir göndermez, sadece log
#   backtest  -> Sadece backtest engine
TRADING_MODE=paper

# Çoklu sembol desteği; virgülle ayrılmış liste
DEFAULT_SYMBOLS=BTCUSDT,ETHUSDT

##############################################
# BINANCE SPOT API AYARLARI (ŞU AN OPSİYONEL)
##############################################
BINANCE_SPOT_USE_TESTNET=true

# Spot mainnet REST
BINANCE_SPOT_MAINNET_BASE_URL=https://api.binance.com

# Spot testnet REST (sadece API ile kullanılabilir)
BINANCE_SPOT_TESTNET_BASE_URL=https://testnet.binance.vision/api

# Spot testnet WebSocket data endpoint
BINANCE_SPOT_TESTNET_WS_URL=wss://stream.testnet.binance.vision/ws

# Spot API credentials (isteğe bağlı; şu an sadece futures kullanacaksan boş bırakabilirsin)
BINANCE_SPOT_API_KEY_TESTNET=your_spot_testnet_api_key_here
BINANCE_SPOT_API_SECRET_TESTNET=your_spot_testnet_api_secret_here
BINANCE_SPOT_API_KEY_MAINNET=your_spot_mainnet_api_key_here
BINANCE_SPOT_API_SECRET_MAINNET=your_spot_mainnet_api_secret_here

##############################################
# BINANCE FUTURES (USDT-M) API AYARLARI
##############################################
# Futures tarafında asıl kullandığımız yer burası

BINANCE_FUTURES_USE_TESTNET=true

# USDT-M Futures mainnet REST
BINANCE_FUTURES_MAINNET_BASE_URL=https://fapi.binance.com

# USDT-M Futures testnet REST (resmi dokümana göre)
BINANCE_FUTURES_TESTNET_BASE_URL=https://demo-fapi.binance.com

# Market data WebSocket:
# mainnet: wss://fstream.binance.com
# testnet: wss://fstream.binancefuture.com
BINANCE_FUTURES_WS_MARKET_MAINNET=wss://fstream.binance.com
BINANCE_FUTURES_WS_MARKET_TESTNET=wss://fstream.binancefuture.com

# WebSocket API (order/ cancel) base:
# mainnet: wss://ws-fapi.binance.com/ws-fapi/v1
# testnet: wss://ws-api.testnet.binance.vision/ws-api/v3 veya wss://testnet.binancefuture.com/ws-fapi/v1 (USDT-M için)
BINANCE_FUTURES_WS_API_MAINNET=wss://ws-fapi.binance.com/ws-fapi/v1
BINANCE_FUTURES_WS_API_TESTNET=wss://testnet.binancefuture.com/ws-fapi/v1

# Futures API credentials (testnet / mainnet)
BINANCE_FUTURES_API_KEY_TESTNET=your_futures_testnet_api_key_here
BINANCE_FUTURES_API_SECRET_TESTNET=your_futures_testnet_api_secret_here
BINANCE_FUTURES_API_KEY_MAINNET=your_futures_mainnet_api_key_here
BINANCE_FUTURES_API_SECRET_MAINNET=your_futures_mainnet_api_secret_here

##############################################
# STRATEJİ KONFİGÜRASYONU (MARKET MAKER)
##############################################
# Ana sembol (CLI ile override edilebilir)
MM_PRIMARY_SYMBOL=BTCUSDT

# Spread parametreleri (basis point cinsinden; 1 bps = 0.01%)
MM_BASE_SPREAD_BPS=8           # Normal koşullarda hedef full spread (0.08%)
MM_MIN_SPREAD_BPS=4            # Asla altına düşülmeyecek spread (0.04%)
MM_MAX_SPREAD_BPS=30           # Aşırı volatilitede çıkılabilecek maksimum spread (0.30%)

# Volatiliteye bağlı spread genişletme katsayısı
MM_VOL_SPREAD_FACTOR=1.0

# Envanter (inventory) kaynaklı mid kaydırma gücü
MM_INVENTORY_SKEW_STRENGTH=1.2

# Order boyutu (bot sermayesine göre)
MM_ORDER_NOTIONAL_PCT=0.01     # Tek limit emir = bot_equity'nin %1'i
MM_MIN_ORDER_NOTIONAL_USDT=10  # Borsanın min notional + güvenlik payı
MM_MAX_ORDER_NOTIONAL_PCT=0.03 # Tek order = bot_equity'nin maks %3'ü

# Quote yenileme
MM_REFRESH_INTERVAL_MS=1000    # 1 saniyede bir quote hesapla
MM_MAX_QUOTE_AGE_MS=2000       # 2 saniyeden eski quote re-quote edilir
MM_PRICE_CHANGE_TRIGGER_BPS=5  # Mid %0.05 değişirse anında re-quote

##############################################
# ENVANTER (INVENTORY) HEDEFLERİ
##############################################
# Hedef net pozisyon (delta-nötr)
MM_TARGET_INVENTORY=0.0

# Inventory limitleri bot sermayesi yüzdesi cinsinden
MM_MAX_INVENTORY_NOTIONAL_PCT_PER_SYMBOL=30   # Tek sembol için hard limit (%30)
MM_SOFT_INVENTORY_BAND_PCT=20                 # Soft band (%20)
MM_HARD_INVENTORY_BAND_PCT=30                 # Hard band (%30)

##############################################
# RİSK YÖNETİMİ
##############################################
# Günlük maksimum zarar (bot sermayesinin yüzdesi)
RISK_DAILY_LOSS_LIMIT_PCT=1.0      # %1

# Maksimum drawdown (peak'ten; bot sermayesi için)
RISK_MAX_DRAWDOWN_PCT_SOFT=10.0    # Soft limit %10
RISK_MAX_DRAWDOWN_PCT_HARD=15.0    # Hard limit %15

# Sembol bazlı pozisyon limitleri (bot sermayesinin yüzdesi)
RISK_MAX_NET_NOTIONAL_PCT_PER_SYMBOL=30
RISK_MAX_GROSS_NOTIONAL_PCT_PER_SYMBOL=60

# Emir limitleri
RISK_MAX_OPEN_ORDERS_PER_SYMBOL=4
RISK_MAX_NEW_ORDERS_PER_SECOND=10
RISK_MAX_CANCELS_PER_SECOND=10
RISK_MAX_CANCEL_TO_TRADE_RATIO=50   # 50:1 üstüne çıkarsa uyarı

##############################################
# FEE / COST MODEL
##############################################
# Binance Futures başlangıç fee seviyeleri (VIP0)
FEE_MAKER_BPS=2.0   # 0.02%
FEE_TAKER_BPS=5.0    # 0.05%

# BNB indirimi vb. için efektif fee çarpanı (1.0 = indirim yok)
FEE_DISCOUNT_FACTOR=1.0

##############################################
# BACKTEST / SIMÜLASYON
##############################################
BACKTEST_DATA_PATH=data/backtest
BACKTEST_DEFAULT_SYMBOL=BTCUSDT
BACKTEST_START_DATE=2024-01-01
BACKTEST_END_DATE=2024-03-01

##############################################
# MONITORING / LOGGING
##############################################
LOG_LEVEL=INFO                 # DEBUG | INFO | WARNING | ERROR
LOG_FILE=logs/market_maker.log
LOG_JSON=true                  # JSON log formatı (structured logging)

# Opsiyonel: Prometheus / Metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9000

# Opsiyonel: Alert kanalları (Slack / Discord / e-posta webhook)
ALERT_WEBHOOK_URL=
ALERT_MIN_SEVERITY=WARNING     # INFO | WARNING | ERROR | CRITICAL

##############################################
# CLI / APPS ÖZEL
##############################################
# run --dry-run çağrısı ile override edilebilir; burada default
CLI_DEFAULT_DRY_RUN=false
CLI_DEFAULT_SYMBOL=BTCUSDT

##############################################
# DİĞER (OPSİYONEL)
##############################################
# Fonksiyonel ayrım için (örn. sadece risk testleri / yalnızca data)
FEATURE_ENABLE_MARKET_MAKER=true
FEATURE_ENABLE_BACKTEST=true
FEATURE_ENABLE_RISK_ENGINE=true

##############################################
# BOT SERMAYESİ
##############################################
BOT_EQUITY_USDT=200.0
